kind: Application
apiVersion: nais.io/v1alpha1
metadata:
  name: sokos-trekk
  namespace: okonomi
  labels:
    team: okonomi
spec:
  image: {{image}}
  ingresses:
  - https://trekk-q1.dev.intern.nav.no
  liveness:
    path: /isAlive
    initialDelay: 30
    periodSeconds: 5
    failureThreshold: 30
  prometheus:
    enabled: true
    path: /actuator/prometheus
  readiness:
    path: /isReady
    initialDelay: 30
    periodSeconds: 5
    failureThreshold: 30
  replicas:
    min: 1
    max: 1
  resources:
    limits:
      cpu: "1"
      memory: 2024Mi
    requests:
      cpu: 100m
      memory: 512Mi
  vault:
    enabled: true
    paths:
    - kvPath: /serviceuser/data/dev/srvtrekk
      mountPath: /var/run/secrets/nais.io/srvtrekk
  env:
    - name: MQGATEWAY01_HOSTNAME
      value: b27apvl219.preprod.local
    - name: MQGATEWAY01_PORT
      value: "1413"
    - name: MQGATEWAY01_NAME
      value: MQLS01
    - name: TREKK_CHANNEL_NAME
      value: Q1_TREKK
    - name: TREKK_TREKK_INN_QUEUENAME
      value: QA.Q1_TREKK.TREKK_INN
    - name: TREKK_TREKK_INN_BOQ_QUEUENAME
      value: Q1_TREKK.TREKK_INN_BOQ
    - name: OB04_TREKK_REPLY_QUEUENAME
      value: QA.Q1_231.OB04_TREKK_REPLY
    - name: OB04_TREKK_REPLY_BATCH_QUEUENAME
      value: QA.Q1_231.OB04_TREKK_REPLY_BATCH
    - name: SRVTREKK_USERNAME
      value: srvtrekk
    - name: SECURITYTOKENSERVICE_URL
      value: https://sts-q1.preprod.local/SecurityTokenServiceProvider/
    - name: VIRKSOMHET_YTELSEVEDTAK_V1_ENDPOINTURL
      value: https://arena-q1.adeo.no/ail_ws/YtelseVedtak_v1
    - name: SPRING_PROFILES_ACTIVE
      value: default,prod
